<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AURA | PRO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: #050505; color: #fff; margin: 0; }
        .movie-grid { display: grid; grid-template-cols: repeat(auto-fill, minmax(160px, 1fr)); gap: 20px; padding: 20px; }
        .card { cursor: pointer; transition: 0.3s; border-radius: 12px; overflow: hidden; background: #111; }
        .card:hover { transform: scale(1.05); outline: 2px solid #fff; }
        
        /* PLAYER SYSTEM */
        #player-layer { display: none; position: fixed; inset: 0; background: #000; z-index: 9999; overflow-y: auto; }
        .vid-frame { width: 100%; aspect-ratio: 16/9; background: #000; border: none; }
        
        /* CAST LIST - EXACT TMDB COPY */
        .cast-wrap { display: flex; gap: 15px; overflow-x: auto; padding: 10px 0; scrollbar-width: none; }
        .cast-item { flex: 0 0 120px; background: #111; border-radius: 8px; overflow: hidden; font-size: 11px; }
        .cast-img { width: 120px; height: 150px; object-fit: cover; background: #222; }
        .cast-info { padding: 8px; }
        
        .btn { padding: 10px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; text-transform: uppercase; font-size: 12px; }
        .btn-main { background: #fff; color: #000; }
        .btn-sec { background: #222; color: #fff; }
        
        ::-webkit-scrollbar { display: none; }
    </style>
</head>
<body>

    <header class="p-6 flex justify-between items-center border-b border-white/10 sticky top-0 bg-[#050505] z-50">
        <h1 class="text-2xl font-black tracking-tighter">AURA</h1>
        <div class="flex gap-4">
            <button onclick="setMode('movie')" class="font-bold opacity-50 hover:opacity-100">MOVIES</button>
            <button onclick="setMode('tv')" class="font-bold opacity-50 hover:opacity-100">SERIES</button>
        </div>
    </header>

    <div id="grid" class="movie-grid"></div>

    <div id="player-layer">
        <div class="p-4 flex justify-between items-center bg-[#0a0a0a]">
            <button onclick="closePlayer()" class="btn btn-sec">← Close</button>
            <div class="flex gap-2">
                <select id="server-list" onchange="changeServer()" class="bg-[#222] text-white p-2 rounded text-[10px] font-bold">
                    <option value="cinemaos">CinemaOS (Primary)</option>
                    <option value="vidsrc">VidSrc Mirror</option>
                    <option value="embed">2Embed Mirror</option>
                </select>
            </div>
        </div>

        <iframe id="main-frame" class="vid-frame" allowfullscreen allow="autoplay"></iframe>

        <div class="p-8 max-w-6xl mx-auto">
            <h1 id="m-title" class="text-5xl font-black mb-2"></h1>
            <p id="m-meta" class="text-sm font-bold opacity-40 mb-6 uppercase tracking-widest"></p>
            
            <div class="mb-10">
                <h3 class="text-xs font-black opacity-30 uppercase mb-4">About</h3>
                <p id="m-desc" class="text-gray-400 leading-relaxed"></p>
            </div>

            <h3 class="text-xs font-black opacity-30 uppercase mb-4">Full Starring Cast</h3>
            <div id="cast-container" class="cast-wrap"></div>
        </div>
    </div>

    <script>
        const API_KEY = 'a45420333457411e78d5ad35d6c51a2d';
        let currentMode = 'movie';
        let activeID = null;

        // LOAD TRENDING
        async function loadUI() {
            const resp = await fetch(`https://api.themoviedb.org/3/trending/${currentMode}/week?api_key=${API_KEY}`);
            const data = await resp.json();
            document.getElementById('grid').innerHTML = data.results.map(m => `
                <div class="card" onclick="openCinema(${m.id})">
                    <img src="https://image.tmdb.org/t/p/w500${m.poster_path}" alt="${m.title || m.name}">
                </div>
            `).join('');
        }

        // OPEN PLAYER
        async function openCinema(id) {
            activeID = id;
            const player = document.getElementById('player-layer');
            player.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // Fetch Details
            const info = await fetch(`https://api.themoviedb.org/3/${currentMode}/${id}?api_key=${API_KEY}`).then(r => r.json());
            const credits = await fetch(`https://api.themoviedb.org/3/${currentMode}/${id}/credits?api_key=${API_KEY}`).then(r => r.json());

            document.getElementById('m-title').innerText = info.title || info.name;
            document.getElementById('m-desc').innerText = info.overview;
            document.getElementById('m-meta').innerText = `${(info.release_date || info.first_air_date).split('-')[0]} • ${info.vote_average.toFixed(1)} Rating`;

            // Render Full Cast (Every single person)
            document.getElementById('cast-container').innerHTML = credits.cast.map(c => `
                <div class="cast-item">
                    <img class="cast-img" src="${c.profile_path ? 'https://image.tmdb.org/t/p/w185'+c.profile_path : 'https://via.placeholder.com/185x230?text=No+Photo'}">
                    <div class="cast-info">
                        <div class="font-bold truncate">${c.name}</div>
                        <div class="opacity-50 truncate">${c.character}</div>
                    </div>
                </div>
            `).join('');

            changeServer();
        }

        // SERVER SWITCHER (Corrected CinemaOS logic)
        function changeServer() {
            const srv = document.getElementById('server-list').value;
            const frame = document.getElementById('main-frame');
            
            let url = '';
            if(srv === 'cinemaos') url = `https://cinemaos.tech/embed/${currentMode}/${activeID}`;
            if(srv === 'vidsrc') url = `https://vidsrc.to/embed/${currentMode}/${activeID}`;
            if(srv === 'embed') url = `https://www.2embed.cc/embed${currentMode === 'tv' ? 'tv' : ''}/${activeID}`;
            
            frame.src = url;
        }

        function closePlayer() {
            document.getElementById('player-layer').style.display = 'none';
            document.getElementById('main-frame').src = '';
            document.body.style.overflow = 'auto';
        }

        function setMode(m) {
            currentMode = m;
            loadUI();
        }

        loadUI();
    </script>
</body>
</html>
